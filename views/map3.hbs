<script 
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIgHRdKzKEajo2T9uICvkdIHToQxgDfHg&libraries=places&calback=initMap&v=weekly">
      async
</script>
{{#if clientes}}
<input type="hidden" id="clientes" value="{{clientes}}" />
{{/if}}
<!-- Image and text -->
<nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="#">
    <img src="/imgs/logo_final.png" width="30" height="30" class="d-inline-block align-top" alt="">
    Pedidos Vaper Studio MX
  </a>
  <div class="alert alert-primary" role="alert">
    <form class="pull-end" action="/guardaTicket/{{ent}}" method="POST" enctype="multipart/form-data" id="form">
      <!---<button class="btn btn-outline-success" type="button">Main button</button>--->
      <button class="btn btn-sm btn-outline-primary invisible" id="ticket" type="submit">Subir Ticket</button>
      <label for="imagen" class="pull-end">Subir Ticket :</label>
      <input type="file" id="receipt" name="receipt" class="form-control mb-3" autofocus required accept="image/jpeg, image/png, image/jpg, application/pdf" placeholder="Subir Ticket">
      <!----<input type="hidden" id="mi" value="" name="mi" class="form-control"/>--->
    </form>
  </div>
</nav>
<div class="row">
  <div class="col-sm-12">
    
  </div>
</div>


<div class="col-md-6">
  <div class="jumbotron">
    <form autocomplete="off" action="{{#unless pedido.id}}/new-pedido2{{else}}/update-pedido/{{pedido.id}}{{/unless}}" method="POST">
      <div class="row">
        <div class="col">
          <label for="repartidor">Repartidor:</label>
          <!---<input
            type="text"
            name="repartidor"
            placeholder="Ingrese numero de Repartidor"
            class="form-control mb-3"
            value="{{pedido.repartidor}}"
            autofocus
          />--->
          
          <select name="repartidor" id="repartidor"  class="form-control mb-3" autofocus placeholder="Elija numero de Repartidor" required>
            <option value="">-Ingrese numero de Repartidor-</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</op7tion>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="Andres">Andres</option>
            <option value="Direccion">Direccion</option>
          </select>
        </div>
        <div class="col">
          <label for="nomCliente">Cliente:</label>
          <input
            type="text"
            name="nomCliente"
            id="nomCliente"
            placeholder="Ingrese nombre del Cliente"
            class="form-control mb-3"
            value="{{pedido.nomCliente}}"
            autocomplete=""
            autofocus
            required
          />
          <input id="distancia" name="distancia" type="hidden" value="" class="form-control" />
          <input id="estimado" name="estimado" type="hidden" value="" class="form-control" />
          <input id="estimadotxt" name="estimadotxt" type="hidden" value="" class="form-control" />
          <input id="costo" name="costo" type="hidden" value="" class="form-control" />
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="org">Origen:</label>
          <input
            type="text"
            name="org"
            id="org"
            placeholder="Domicilio Origen"
            class="form-control mb-12"
            value="Lago Hielmar 96, Modelo Pensil, Miguel Hidalgo, 11460 Ciudad de México, CDMX, México"
            required
          />
          <input id="orglat" name="orglat" type="hidden" value="" />
          <input id="orglong" name="orglong" type="hidden" value="" />
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="dest">Destino:</label>
          <input
            type="dest"
            name="dest"
            id="dest"
            placeholder="Domicilio Destino"
            class="form-control mb-3"
            value="{{pedido.dest}}"
            required
          />
          <input id="destlat" name="destlat" type="hidden" value="" />
          <input id="destlong" name="destlong" type="hidden" value="" />
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="phone_rep">Tel Repartidor:</label>
          <input
            type="text"
            name="phone_rep"
            id="phone_rep"
            placeholder="5528296055"
            class="form-control mb-3"
            value="{{pedido.phone_rep}}"
          />
          <input id="destlong" name="destlong" type="hidden" value="" />
        </div>
        <div class="col">
          <label for="phone_cli">Tel Cliente:</label>
          <input
            type="text"
            name="phone_cli"
            id="phone_cli" 
            placeholder="5528296055"
            class="form-control mb-3"
            value="{{pedido.phone_cli}}"
          />
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="forma_pago">Forma de Pago:</label>
          <!---<input
            type="text"
            name="repartidor"
            placeholder="Ingrese numero de Repartidor"
            class="form-control mb-3"
            value="{{pedido.repartidor}}"
            autofocus
          />--->
          <select name="forma_pago" id="forma_pago"  class="form-control mb-3" autofocus placeholder="Elija forma de pago" required>
            <option value="">-Ingrese forma de pago-</option>
            <option value="debito">Débito</option>
            <option value="credito">Crédito</option>
            <option value="transferencia">Transferencia</option>
            <option value="efectivo">Efectívo</option>
            <option value="mercadoPago">Mercado Pago</option>
            <option value="payPal">PayPal</option>
            <option value="rappi">Rappi</option>
            <option value="diddi">Diddi</option>
          </select>
        </div>
        <div class="col">
          <label for="total_compra">Total de Compra:</label>
          <input
            type="text"
            name="total_compra"
            placeholder="Ingrese total de compra"
            class="form-control mb-3"
            value="{{pedido.total_compra}}"
            autofocus
            required
          />
          <!---<input id="distancia" name="distancia" type="hidden" value="" class="form-control" />
          <input id="estimado" name="estimado" type="hidden" value="" class="form-control" />
          <input id="costo" name="costo" type="hidden" value="" class="form-control" />--->
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="t">#T:</label>
            <input type="text" name="t" id="t" placeholder="" class="form-control mb-3" value="" autofocus />
        </div>
      </div>
      <div class="row">
        <div class="col-sm-2">
          <label for="f">#M:</label>
            <input type="text" name="m" id="m" placeholder="" class="form-control mb-3" value="" autofocus />
        </div>
        <div class="col-sm-2">
          <label for="f">#A:</label>
            <input type="text" name="a" id="a" placeholder="" class="form-control mb-3" value="" autofocus />
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="n">#N:</label>
            <input type="text" name="n" id="n" placeholder="" class="form-control mb-3" value="" autofocus />
        </div>
      </div>
      <div class="row">
        <div class="col">
          <label for="c">#C:</label>
            <input type="text" name="c" id="c" placeholder="" class="form-control mb-3" value="" autofocus />
        </div>
      </div>
      {{#if pedido.id}}
        <!---<a
                href="/edit-pedido/{{pedido.id}}"
                class="btn btn-secondary"
              >Actualizar</a>
        <a href="/" class="btn btn-secondary">
          Cancel
        </a>--->
      {{else}}
        <button class="btn btn-primary btn-block">
          Agregar
        </button>
      {{/if}}
    </form>
  </div>
</div>
<div class="col-md-6">
  <div class="">
      <!---<div class="container-fluid">
          <h4>Verifica Dirección</h4>
          <p></p>
          <form class="form-horizontal">
              <div class="form-group">
                  <label for="org" class="col-xs-2 control-label"><i class="far fa-dot-circle"></i></label>
                  <div class="col-xs-4">--->
                      <input type="hidden" id="org2" placeholder="Origin" class="form-control" value="Lago Hielmar 96">
                  <!--</div>
             </div>
             <div class="form-group">
              
                  <label for="dest" class="col-xs-2 control-label"><i class="fas fa-map-marker-alt"></i></label>
                  <div class="col-xs-4">--->
                      <input type="hidden" id="dest2" placeholder="Destination" class="form-control">
                  <!---</div>
               </div>
          </form>
          <div class="col-xs-offset-2 col-xs-10">
              <button class="btn btn-info btn-lg " onclick="calcRoute();"><i class="fas fa-map-signs"></i></button>
          </div>
      </div>--->
      <div class="container-fluid">
          <div id="googleMap">

          </div>
      </div>
  </div>
</div>

<div class="col-md-12">
  <div class="container-fluid">
    <div id="output">
    </div>
  </div>
</div>

<div class="col-md-12">
  <div class="card bg-dark text-light">
    <div class="card-header">
      <h1 class="h4 text-white">Lista de pedidos</h1>
      <!---<form action="http://vaperstudio.com:4000/reporte">
          <input type="submit" value="Descarga Reporte" class="pull-right"/>
      </form>--->
      <!---<h6>Completados : {{finalizados}}</h6>
      <h6>Pendientes : {{pendientes}}</h6>--->
      <h6>Entrantes : <span class="badge bg-primary">{{ent}}</span></h6>
      <h6>Sin Repartidor : <span class="badge bg-light" style="color:#000;">{{noas}}</span></h6>
      <h6>No Iniciados : <span class="badge bg-danger">{{noini}}</span></h6>
      <h6>Pendientes : <span class="badge bg-warning">{{pendientes}}</span></h6>
      <h6>En Ruta : <span class="badge bg-info">{{enruta}}</span></h6>
      <h6>Completados : <span class="badge bg-success">{{completado}}</span></h6>
      
    </div>
    <div class="card-body" style="/*color: black;*/">
      {{#if accordion}}
        <!---<input id="accordion" type="hidden" value="{{accordion}}" />
        <div id="pedidos" ></div>--->
        {{{accordion}}}
      {{!-- {{else}}
        <p class="fs-4 text-center">No hay pedidos registrados.</p> --}}
      {{/if}}
    </div>
    <div class="card-footer">
      
    </div>
  </div>
</div>

<div id="myModal" class="modal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="background: #000;color: #fff;">
        <h5 class="modal-title">Resumen Pedido</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="pedido"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <!---<button type="button" class="btn btn-primary">Save changes</button>--->
      </div>
    </div>
  </div>
</div>

      <script type="text/javascript">
      //javascript.js
      //set map options
      $(document).ready(function(){

        $("#pedidos").append($("#accordion").val());
        
      }).on("change","#dest",function(){
        autocomplete1.addListener('place_changed', function () {

          var place = autocomplete1.getPlace();

          // place variable will have all the information you are looking for.
          //console.log(place.formatted_address);
          //$('#org').val(place.formatted_address);

          //$('#dest2').val(place.geometry['location'].lng());
          $("#org").val(place.formatted_address);

        });
        autocomplete2.addListener('place_changed', function () {

          var place = autocomplete2.getPlace();

          // place variable will have all the information you are looking for.
          //console.log(place.formatted_address);
          //$('#dest').val(place.formatted_address);

          //$('#dest2').val(place.geometry['location'].lng());
          $("#dest").val(place.formatted_address);

        });
        
        console.log($("#org").val());
        console.log($("#dest").val());
        
      }).on("click" ,".imprimir", function(){

        var html = $(this).parents("li").html();//'<style media="all" type="text/css">';    
        /*html += 'body, html{margin:0; padding:0; line-height: 1.0em; z-index: 0;}';    
        html += 'H1{font-size: 9pt; font-family: arial; z-index: 0;}';    
        html += 'H2{font-size: 9pt; font-family: arial; font-style: italic; z-index: 0;}';    
        html += 'em{color: #000000;}';    
        html += '#watermark{position:absolute; z-index: -1; filter:alpha(opacity=15); -moz-opacity: 15%; opacity: 0.15; -khtml-                            opacity: 0.15; top: 0; left: 0; height: 100%; width: 100%;}';    
        html += '</style>';    
        html += '<div id="watermark"><img src="GenericLogo.jpg" width="100%" height="100%"></div>';    
        html += '<H1><em>The Home Page</em></H1>';    
        html += '<H2><em>';    
        html += '<ul STYLE="list-style-image: url(checkbox.gif)"><li>  Here is the first description line.</li></ul>';    
        html += '<ul STYLE="list-style-image: url(checkbox.gif)"><li>  Here is the second description line.</li></ul>';    
        html += '<ul STYLE="list-style-image: url(checkbox.gif)"><li>  Here is the third description line.</li></ul>';    
        html += '</em></H2>';    
        html += '<H2><em>Here is the summary line.</em></H2>';  */  
        // preview the output in the Javascript variable “html”,    
        // display a print dialog, then wait for the user to click    
        // the “Print” button.    
        var printWin = window.open("", "printSpecial");    
        printWin.document.open();    
        printWin.document.write(html);    
        printWin.document.close();    
        printWin.print(); 
        //console.log("Hola");

      }).on('change','.asigrep',function(){
        console.log("change");
        var id = $('#pe').val();
        var repartidor = $(this).val();
        //console.log(this.value);
        //$('#form'+id).submit();
        $.get("http://vaperstudio.com:4000/arepa/"+id+"/"+repartidor,{ id : id , repartidor : repartidor  }, function(data, status){
            console.log(data);
            //redirect("/ecovsmx");
            window.location.href = "http://vaperstudio.com:4000/ecom";
          });
      });
      
      var myLatLng = { lat: 38.3460, lng: -0.4907 };
      var mapOptions = {
          center: myLatLng,
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          

      };

      //create map
      var map = new google.maps.Map(document.getElementById('googleMap'), mapOptions);

      //create a DirectionsService object to use the route method and get a result for our request
      var directionsService = new google.maps.DirectionsService();

      //create a DirectionsRenderer object which we will use to display the route
      var directionsDisplay = new google.maps.DirectionsRenderer();

      //bind the DirectionsRenderer to the map
      directionsDisplay.setMap(map);


      //define calcRoute function
      function calcRoute() {
            var address1 = $("#org").val();
            fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+address1+'&key=AIzaSyAIgHRdKzKEajo2T9uICvkdIHToQxgDfHg')
            .then(response => response.json())
            .then(data => {
              const latitude1 = data.results[0].geometry.location.lat;
              $("#orglat").val(latitude1.toString());
              const longitude1 = data.results[0].geometry.location.lng;
              $("#orglong").val(longitude1.toString());
              console.log({latitude1, longitude1})
            });
            var address2 = $("#dest").val();
            fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+address2+'&key=AIzaSyAIgHRdKzKEajo2T9uICvkdIHToQxgDfHg')
            .then(response => response.json())
            .then(data => {
              const latitude2 = data.results[0].geometry.location.lat;
              $("#destlat").val(latitude2.toString());
              const longitude2 = data.results[0].geometry.location.lng;
              $("#destlong").val(longitude2.toString());
              console.log({latitude2, longitude2})
            });
          //create request
          var request = {
              //origin: document.getElementById("org").value,
              //destination: document.getElementById("dest").value,
              origin: $("#org").val(),
              destination: $("#dest").val(),
              travelMode: google.maps.TravelMode.TWO_WHEELER, //WALKING, BYCYCLING, TRANSIT
              unitSystem: google.maps.UnitSystem.IMPERIAL,
              avoidHighways: true,
            avoidTolls: true,
            optimizeWaypoints : true,
            provideRouteAlternatives: true,
            drivingOptions: {
              departureTime: new Date(/* now, or future date */),
              trafficModel: 'bestguess'
           },
          }

          //pass the request to the route method
          directionsService.route(request, function (result, status) {
              if (status == google.maps.DirectionsStatus.OK) {
                  var distance = result.routes[0].legs[0].distance.value; // meters
                  var distance_KM = distance / 1000; // convert to kilometers

                  var time = result.routes[0].legs[0].duration.value; // meters
                  var est_min = time / 60; // convert to kilometers
                  var envio = 0;

                  /*if(parseFloat(total) >= 3000.00){
                    envio = 0;
                  }else{*/
                    if (parseFloat(distance_KM) >= 1.00 && parseFloat(distance_KM) <= 4.99){
                      envio = 75;
                    }else if (parseFloat(distance_KM) >= 5.00 && parseFloat(distance_KM) <= 9.99){
                      envio = 99;
                    }else if(parseFloat(distance_KM) >= 10.00 && parseFloat(distance_KM) <= 14.99){
                      envio = 149;
                    }else if(parseFloat(distance_KM) >= 15.00 && parseFloat(distance_KM) <= 28.00){
                      envio = 199;
                    }
                  //}

                  //Get distance and time
                  const output = document.querySelector('#output');
                  output.innerHTML = "<div class='alert-info'>From: " + document.getElementById("org").value + ".<br />To: " + document.getElementById("dest").value + ".<br /> Distancia <i class='fas fa-road'></i> : " + distance_KM /*result.routes[0].legs[0].distance.text*/ + " km.<br />Tiempo Estimado <i class='fas fa-hourglass-strt'></i> : " + result.routes[0].legs[0].duration.text + ". <br /> Costo : $"+(distance_KM*7)+" MXN</div>";
                  $("#costo").val((distance_KM*7));
                  $("#distancia").val(distance_KM);
                  $("#estimadotxt").val(result.routes[0].legs[0].duration.text);
                  $("#estimado").val(Math.round(est_min));
                  //console.log(result.routes[0].legs[0].duration.value);
                  //display route
                  directionsDisplay.setDirections(result);
              } else {
                  //delete route from map
                  directionsDisplay.setDirections({ routes: [] });
                  //center map in London
                  map.setCenter(myLatLng);

                  //show error message
                  output.innerHTML = "<div class='alert-danger'><i class='fas fa-exclamation-triangle'></i> Could not retrieve driving distance.</div>";
              }
          });

      }

      //create autocomplete objects for all inputs
      var options = {
          types: [/*'(cities)'*/],
          componentRestrictions: {country: "mx"}
      }

      var input1 = document.getElementById("org");
      var autocomplete1 = new google.maps.places.Autocomplete(input1, options);

      var input2 = document.getElementById("dest");
      var autocomplete2 = new google.maps.places.Autocomplete(input2, options);

      google.maps.event.addListener(autocomplete1, 'place_changed', function() {
          var place = autocomplete1.getPlace();
          $('#org').val(place.formatted_address);
          calcRoute();
          console.log($('#org').val());
      });
      google.maps.event.addListener(autocomplete2, 'place_changed', function() {
          var place = autocomplete2.getPlace();
          $('#dest').val(place.formatted_address);
          calcRoute();
          console.log($('#dest').val());
      });

      //$(document).on('change', '#org', function(){
        /*$('#org2').change();
        $('#org2').val();

        autocomplete1.addListener('place_changed', function () {

          var place = autocomplete1.getPlace();

          // place variable will have all the information you are looking for.

          $('#org2').val(place.formatted_address);

          //$('#org2').val(place.geometry['location'].lng());

        });*/
      //}).on('change', '#dest', function(){
        /*$('#dest2').change();
        $('#dest2').val();

        autocomplete2.addListener('place_changed', function () {

          var place = autocomplete2.getPlace();

          // place variable will have all the information you are looking for.
          console.log(place.formatted_address);
          $('#dest2').val(place.formatted_address);

          //$('#dest2').val(place.geometry['location'].lng());

        });*/

      //});

      function autocomplete(inp, arr) {
      /*the autocomplete function takes two arguments,
      the text field element and an array of possible autocompleted values:*/
      var currentFocus;
      /*execute a function when someone writes in the text field:*/
      inp.addEventListener("input", function(e) {
          var a, b, i, val = this.value;
          /*close any already open lists of autocompleted values*/
          closeAllLists();
          if (!val) { return false;}
          currentFocus = -1;
          /*create a DIV element that will contain the items (values):*/
          a = document.createElement("DIV");
          a.setAttribute("id", this.id + "autocomplete-list");
          a.setAttribute("class", "autocomplete-items");
          /*append the DIV element as a child of the autocomplete container:*/
          this.parentNode.appendChild(a);
          /*for each item in the array...*/
          for (i = 0; i < arr.length; i++) {
            /*check if the item starts with the same letters as the text field value:*/
            if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
              /*create a DIV element for each matching element:*/
              b = document.createElement("DIV");
              b.className = "cl";
              /*make the matching letters bold:*/
              b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
              b.innerHTML += arr[i].substr(val.length);
              /*insert a input field that will hold the current array item's value:*/
              b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
              /*execute a function when someone clicks on the item value (DIV element):*/
              b.addEventListener("click", function(e) {
                  //if (event.code === "ArrowDown"){
                      // Handle "down"
                      //updateYPosition(-moveRate);
                      /*insert the value for the autocomplete text field:*/
                      inp.value = this.getElementsByTagName("input")[0].value;
                      $.get("http://vaperstudio.com:4000/autollena/"+inp.value,{ cliente : inp.value  }, function(data, status){
                          //console.log(data);
                          /*$("#marcadores").val();
                          $("#marcadores").val(data);*/
                          //mar = $("#marcadores").val().split("@");
                          //console.log(mar.length+"LENGTH");
                          //for (i = 0; i <= mar.length-1; i++) { 
                            //console.log(mar);
                          //if(i == 0/*marcadores.length-2*/){
                            //console.log(data[0].telefono);
                            $("#dest").val(data[0].domicilio);
                            $("#phone_cli").val(data[0].telefono);
                            $("#forma_pago").val(data[0].forma_pago);
                            $("#nomCliente").val(data[0].nombre);
                            $("#t").val(data[0].t);
                            $("#m").val(data[0].m);
                            $("#a").val(data[0].a);
                            $("#n").val(data[0].n);
                            $("#c").val(data[0].c);
                            calcRoute();
                            //var coo = data.split(",");
                              //var coord = data.split(",");
                              //console.log(coord[0]+"<-->"+coord[1]);
                              //motoMrk.setMap(null);
                               /*var coo = coord[i].split(",");
                              console.log(coo);
                              motoMrk = {
                                        url: "/imgs/delivery_icon.png", // url
                                        scaledSize: new google.maps.Size(25, 25), // scaled size
                                        //origin: new google.maps.Point(0,0), // origin
                                        //anchor: new google.maps.Point(0, 0) // anchor
                                    };
                              motoMrk = new google.maps.Marker({
                              position: new google.maps.LatLng(data[0].latitude, data[0].longitude),
                              icon: moto,
                              map: map
                            });

                              motoMrk.setPosition( new google.maps.LatLng( coo[0], coo[1] ) );
                              map.panTo( new google.maps.LatLng( coo[0], coo[1] ) );*/
                              
                            //}
                          //}
                        });
                      /*close the list of autocompleted values,
                      (or any other open lists of autocompleted values:*/
                      closeAllLists();
                  //}
              });
              a.appendChild(b);
            }
          }
      });
      /*execute a function presses a key on the keyboard:*/
      inp.addEventListener("keydown", function(e) {
          var x = document.getElementById(this.id + "autocomplete-list");
          if (x) x = x.getElementsByTagName("div");
          if (e.keyCode == 40) {
            /*If the arrow DOWN key is pressed,
            increase the currentFocus variable:*/
            currentFocus++;
            /*and and make the current item more visible:*/
            addActive(x);
          } else if (e.keyCode == 38) { //up
            /*If the arrow UP key is pressed,
            decrease the currentFocus variable:*/
            currentFocus--;
            /*and and make the current item more visible:*/
            addActive(x);
          } else if (e.keyCode == 13) {
            /*If the ENTER key is pressed, prevent the form from being submitted,*/
            e.preventDefault();
            if (currentFocus > -1) {
              /*and simulate a click on the "active" item:*/
              if (x) x[currentFocus].click();
            }
          }
      });
      function addActive(x) {
        /*a function to classify an item as "active":*/
        if (!x) return false;
        /*start by removing the "active" class on all items:*/
        removeActive(x);
        if (currentFocus >= x.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = (x.length - 1);
        /*add class "autocomplete-active":*/
        x[currentFocus].classList.add("autocomplete-active");
      }
      function removeActive(x) {
        /*a function to remove the "active" class from all autocomplete items:*/
        for (var i = 0; i < x.length; i++) {
          x[i].classList.remove("autocomplete-active");
        }
      }
      function closeAllLists(elmnt) {
        /*close all autocomplete lists in the document,
        except the one passed as an argument:*/
        var x = document.getElementsByClassName("autocomplete-items");
        for (var i = 0; i < x.length; i++) {
          if (elmnt != x[i] && elmnt != inp) {
            x[i].parentNode.removeChild(x[i]);
          }
        }
      }
      /*execute a function when someone clicks in the document:*/
      document.addEventListener("click", function (e) {
          closeAllLists(e.target);
      });
    }

    if($("#clientes").val() !== undefined){
      var clientes = $("#clientes").val().split(",");
      autocomplete(document.getElementById("nomCliente"), clientes);
    }

    const ws=new WebSocket('ws://vaperstudio.com:8080');
    ws.binaryType = "blob";
    // Log socket opening and closing  
    ws.addEventListener("open", event => {
    console.log("Websocket connection opened");
    });
    ws.addEventListener("close", event => {
    console.log("Websocket connection closed");
    });
    ws.onmessage = function(message){
    /*const msgDiv=document.createElement('div');
    msgDiv.classList.add('msgCtn');*/
      if (message.data instanceof Blob) {
        reader = new FileReader();
        reader.onload = () => {
          /*msgDiv.innerHTML = reader.result;
          document.getElementById('messages').appendChild(msgDiv);*/
          //console.log(reader.result+"aca");
            if(reader.result !== undefined){
              var coo = reader.result.toString().split("@");
              if($("#indicator_"+coo[0]).hasClass("blinking-green")){
                $("#indicator_"+coo[0]).removeClass("blinking-green")
              }else if($("#indicator_"+coo[0]).hasClass("blinking")){
                $("#indicator_"+coo[0]).removeClass("blinking");
              }
              $("#indicator_"+coo[0]).addClass("blinking-green");
            }
            
            /*console.log(coo[1]);
            var co = coo[1].split(",");
            //console.log(co);
            if($("#repartidor").val() == coo[0]){
              motoMrk.setPosition( new google.maps.LatLng( parseFloat(co[0]), parseFloat(co[1] ) ));
              map.panTo( new google.maps.LatLng( parseFloat(co[0]), parseFloat(co[1] )) );
            }*/
            
        };
        reader.readAsText(message.data);
      } else {
      /*console.log("Result2: " + message.data);
      msgDiv.innerHTML = message.data;
      document.getElementById('messages').appendChild(msgDiv);*/
        if(message.data.fin !== undefined){
        var coo = message.data.split("@");
          /*var co = coo[1].split(",");
          if($("#repartidor").val() == coo[0]){
            motoMrk.setPosition( new google.maps.LatLng( parseFloat(co[0]), parseFloat(co[1] ) ));
            map.panTo( new google.maps.LatLng( parseFloat(co[0]), parseFloat(co[1] )) );
          }*/
        if($("#indicator_"+coo[0]).hasClass("blinking-green")){
          $("#indicator_"+coo[0]).removeClass("blinking-green")
        }else if($("#indicator_"+coo[0]).hasClass("blinking")){
          $("#indicator_"+coo[0]).removeClass("blinking");
        }
        $("#indicator_"+coo[0]).addClass("blinking-green");
        }
      };
    };
    
    setInterval(function() {
      $(".foco").removeClass("blinking-green");
      $(".foco").addClass("blinking");
    }, 10000);

    const myModalEl = document.getElementById('myModal')
      myModalEl.addEventListener('show.bs.modal', event => {
          console.log(event.relatedTarget.id);

          var ticket = $("#"+event.relatedTarget.id).next().val();

          var orden = '<iframe src="'+ticket+'" height="100%" width="100%" style="overflow:hidden" scrolling="no" ></iframe>';
          /*var pro = prods.split("@");
          console.log(pro);
          $("#pedido").html("");
          var orden = "";
          var total = 0;
          var t = "";
          var m = "";
          var a = "";
          var n = "";
          var c = "";
          var envio = "";
          orden += '<ul class="list-group list-group-flush" style="color: #000;">';
          pro.forEach(function(prod, key) {
            var pr = prod.split("|");
            if(pr[9] !== undefined){
              total += parseInt(pr[1])*parseInt(pr[2]);
              orden += '<li class="list-group-item">';
              orden += '<img src="'+pr[3]+'" style="width: 50px;border:2px solid #000;float: left;" />';
              orden += '<h6>'+pr[0]+'</h6>';
              orden += '<p>'+pr[1]+' x <span>'+pr[2]+'</span></p>';
              orden += '</li>';
             t = pr[4];
             m = pr[5];
             a = pr[6];
             n = pr[7];
             c = pr[8];
             envio = pr[9];
           }
          });

          orden += '<li id="total"><h5 class="float-start" style="color : #000 ;">Envío : $ '+envio+' MXN <small class="float-end"></small> Total : $ '+(parseInt(total)+parseInt(envio))+' MXN </h5><div id="submitForm"></div></li>';
              orden += '</ul>';

          orden += '<div class="card1">'
              orden += '<div class="card__front card__part">'
              //orden += '<img class="card__front-square card__square" src="https://image.ibb.co/cZeFjx/little_square.png">'
              orden += '<img class="card__front-logo card__logo" src="data:image/png;base64,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TUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1LTAxLTEyVDE5OjAxOjgxPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5QaXhlbG1hdG9yIDMuMi4xPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjE8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEyMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NDA8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4K9CKnwgAADkxJREFUeAHtGwmQVMX1df852OVUucIhKrhcHsghoCkTRRFUkHVnl11YMBoMxiMxlpoyqaSMgVQ0kUQSSVBSXsAe7IJI0BJEiRTeKDdCVBQQD67l2HP+787rGf+ff/Tv/2d3rEpZdtXM73f0657/ul+/fq8H4LvyrX4D5Fv963L54657ujfE250HQM4BjfcAruWjeAO4UQeE7Mf6bnhn5w745IGmXHbbVlkOBTdUwS8hAhNbI5QYwKgGh/UkrM8/Dk+R2dCQtZxrqntCR/o2MKABbY/DsoPDAX7WnOK7oXIMaJGagDYAx5NjYU2ZUEaI8kAEEoMmoNwiMPiVENH6BDZiLAmcbULlrwXe8jzUlr0b2MbNMG5pDzgjdg+irwTGu+LkcejIYuecQ2PLBbB6+jELJ6lE7Lj8qfDQ0cXwQl4MJqPUUhIBnLEhy9eSIjEobuoKPz9UAZd3K4ODIVun2fJ4GRDaF7SAVrrxnKVcwarRC/DTW9mKsSZU7mdKHkHsMy8PxvS+HeX9AojWK8XveEsKCZRGAegY5MBP/DdwVUVvWFsW/h0UVhZATHsN30GPVC9B0zw/OhL51ipG5F0pp5fDtrwSmNuuBM5vbIERjMHj+GlUCXHTKIGCjhH4uxsfCFNSHsgjGJLNC5x8dIgTlkCc7UYsk1AyqKKqq2HsmR9AJPonS7kZanY1xo5mpVwhPUqfwH7Tyg3X28VBbMo50qUU3stLwOwj9dBX5/B7fD3HgwSadE5gEl8IYp8KV65fPATNIZrdgML4f2Bl+U4nFw+hYOJq45QAJVW/Ak17EVfumS5KK0G2PauGU6qHAY1cllUbSkcF8SsVbDbucyMcaV8Ev/2qDs4xGPwFV3TSpPk9KYXIyU4wzI/uwcfj4VYv6K7VKySRYAVTtsvTp4lI1N4PNDoXKNqenBUtOwXHtNuz7trgbVvB7g77zoKj+Qm4e9LG383b39DV/4V93TASgRFuGXIY1zsn0+U0G1Y3PoeP6lbYMACj53cK3H9FAwPkKzhR8UOgfI5DZi4Awwiv4GuXnIYO1bSsu41o3wPh3StKqBXsbv/yvkGvDli9cPDcHT/agis67cm6mRBG/y/Y5Ip2hRWXhTONdBFsmu20Hn26DZZ07UUxLlEwTiwSfQxXbqveg7cTG4bBNhukruZHb4IIDb+d2aXF2ynNdOt+WEvdBjw6tDy4Y/KFI1955NjJJEiPHig83AqOhjDPjOnQdGqh/bel6iSEeRbHl33HP/S0LaoejxMr2LyLhoaxFlr0WdDQPByO1feCLw51g3q9HzQ1jgaWnAEGexQMPbNqj9Vn6p6O7QicZJTeZsdkVdeo0kyHPQA4+1w1uwFKqt/EI8FlO4+e3bPrymeb90y8d3u/9l84jlXosg7ZPw/y+t6t8sLnxwF4Ma53Zx9uiPNV8O8bvcccEgmzgj/0rHwhn2hT3N1IYb3lZqgpfVJKA9iH+LfxszhFL6wcDFq0HNbfVOfD70QnqiYAifV3IrOB+DewgkX/THvFGgZrHy9Y/dehW48WbLZwWEHDp3XqBRfacZ56cc9JyNjZg3cjCFvgRqXhEB40Abm/QMV5NaAwvkmhXG/jFaW7oKbo116CD4a0wrmyi2J0JC4Q39XROhMtOjCMdfZ+AGJk1Ctzh22rcyoZTUTAPkxmOOVIIAPPsNUlrv5MvhAmmhuS/RfbM0gHMkxRsifnvj6GjD0rXNGSc9BRUUcOdaNaKTNCu0Bh1bl+PK1X8L5jb+G+U+8QzDQYuebBCw809LBeKFV50uOePiPwB4oOOP8n2lPu6EsAkxbmo2Xv58F7EdZ4nCSe54QlkEYvgeLqayWUtqO0+E+VDp7BPgNmPBSiI18z3XoFp7xZvsHbeYz0f+Hh/vXJdJiSMoWjdVp8Kv5ADO8pis4a4PCpp6QcpNNA5QsyG7UQuYnW4KjJonwSWguJZXeqTKGyvYwoQqIAN8tIFo4YS2D5B1uBsUYLJ6to2sUytMC1XsGiNWdys8k6xse99jCOC5KMwtD/zgd0pCSFojMSVDSo8HVYtBDmmeEoNu/8QNoN51uleDeS0jgmG+ZDce0bkKi4xE1uFTy6dxlOztOVbRuNZwAe0PE9b1HyKSJabVNwi4+CcTTvHxnQa9FHU7aLiFb37nCBZ4ATK/sDJWM9eDeiMfmYG2XBWjT4iENgr28KjzFn0MQS7FPR6GiIxDfiCWIFiMRAW0pEu0PZnLP3YdW0HSkewt9R8gLHiCFmvySlbQp+vnQz6MYRidwU6s7N5RfVNUU/iRCJmW4fYvUa7C14vux9P/lAjWAFg48HLYTuokvQj9jrK9+PQCNTIBrZDiU18+DSf3X0Y/PFFy4dixmji3zpgqAbz1p0TtQKpjQPJg883+K3VdqmYOH4UL7eJs9Z5RTK371fw4fXCSA82Dwz4x9OgS6I08EujBf086AF546SFjwNzMC9RPc2DMAI34FiSrFX5+1QuPQHAdxOcjSujjszZkCdsdRq1KSrFSwY45r3HSO6jQpGCQbI92HRKZa1B4f1XX9orDNemkrQ0wFpDp9vYRk27aryoQIMrY6hBx0cINB9HCxT8PKpG3GeTkMlO0OgJj3oKbJP0dg69LTVJteUM/6Z7ui8FJug9ElgDayb9qVFW1W2G1f0SQuWVcg3pWDmvw+b4/jD9usG8mqImTBQLXj1UvKk794pBBWwAlxB0n3H6kdUWNLniGTjqipehnzj8PpN+OS8rTmOQ8NU59/Q077LjpbWO7e7Bfkz70LGxG3mOUUXR0SyScZq4Yg8s9T2FbyidA/OrgNWR5LK64cH9rv37cIuKdKIhVGM/06VsGVQjHEwmtXmOaYFm2ch8VDTroxgRa2mbAN8eWooZnUW4WrGKGsrCiWPqM11tYZBp1uVksVKff2z5zw8BNRmmsPQVFzA1bDtChYCKc2ELV0dpEDMs/7549J0tOWsLhh7JV1lbBaO85egdvrHFiyrGCGSBGLibfyx2rTZZYv4cXXRLXgsuRj0YMtkb5qqi6xULPaY73k5wa4PvttFa+DA3Y1e2QGetLAikdM8UcPcKJgllftwarCmJ01osHlmfnFn+89mITzogFscdnH2+rISjD8nrgS95WpczZvtpMA6oUMhUXWVlI/S4H2a6Rnv2S6kofFdOyitU2/iITcKbmoOVrAWGZFKzlMyWTo4E8mNT6F26moT9H2SNiQZfIW6CDWla6A6MQIVfbsnLOtidYAkco0DFoC4kkQjl3vwdoTB9sHykvV2lFVfNXMvhmwPW7CsQrxXeIKdFJkgN06k8Upq92DgosBNsmBuDIc+PRJozttZOFnFoCLnG7AH4l5GqH9fllwW7GBZvL4VhtmkBaigDXgveh2Ov5svp0mg4B1bNH6bSfZ9UkxslCxH36PWhwWPT6orpxrxhCxzo2AxHMJxFSsUTPDMSuEnPiNPoxlrgS9PLFLyCGIhwygYXtANKrrPNZ2gdjL6yvJtkKi8FWjM7+1nWnGSdihNTDoYMtMEfZ9EOxePfr6ZIaVyhVBC+8PYRafDG7OsGHtuTLQQrrvThwJpK6mjBIb6VIVDDWy4+ZCKJUWjIWLQgvGLE7lYwZnhvHnwxQygqhknHNSeHWaic9XRgfumgN4dMD+cKblT8MGTr7b6eGGOxzAWmFXlM8wtDp19ZZ/JlryrKoJzwBazqzK8mzNg4yJbIKPO8KfWxqS+JThMJeow07lTsDALBNRZD9X4DH0LiKhSqBLCwaI+Eawu0T9CouYluKHq0lBdmUwictYu/qgJKp/UyPyO4uorcN8Od2ZXCg1JJGyUnTN3e7CQyjFsSUAdRLf3bq9zhs5FyELEESlgbhLZLUqUT/HvOKlAPx0PxTW7gRgrMfjwGpxq2QIvlnsDNtcs6Qd5kYmopLvwMzBwhCJ//fmplRk+Enw0yjDnoOZ0tHKsYBEcoPdkPUqDnYA9+xeHayfuUNcOCuRlUg+a4iQcjJMwXTShMHofAvdBZ3wVJTVN6CyKGHAjfmKo+O6o1A5p5pDfFBZYwZXxFX0xqKM+FoYUG5pNoz1h4uI+5mTNrYJ3f7oBBp2dxJcSDT2gNOMzsPXe+lBtJlT2w5xsfiAvN3Z5eAorB+DY/I9paVo/q505ESxEQEWkHo+xORZXpxh63USzYFkldVsjm4AMz8ffoDb5HWLCTB8Q3eVWwUJJg2rfQrnfF8JDF132dxSf1u1DhChF05O614PWsvi3pE/3vmhhhQw9AS+XHk/xiD0b+Cw8u/g2SREIPAtVRbPVTDaquMfWraM64AGpu9KpywwBG5lNcOiqHhzVssvS2XoQV03DFgK4/wYUndXBSzM+93ARep4HlwsEY4cw2jUBlpe+Z4krYMX4b4XuFuxXSYprOVmUdTceCbykwDP599wrOET60PFzNL7AAQcCkWAF+3nQVMu9gsUEPdU8ClZMe8Mx9EiIuDNnH4U/Odik86DEA1h3pXOv4L0n3sRMTINtOP5V8Weyqh3Z3Ysihnr/Eb35edAGDw4z+o/WSRF3tVlyGl5yvwJemP6pg3hD5XDMD49x4GSAQeSJBRmvA8fUqUPxR4LJi1Ph0twrWFynpWyDYzx+ACFPpG4N+tFleBHyDCqGzxm4hqUzRJw9jsl9p1KCZAq6MP2ML4FkcgIsKxoM1VMrxGzyNKXROzw4N0LkvJvrszPPpgzDUCtY8LVLOVo5drLMAdQ1zYR4RH0lNMV7cp/ZJNwTj0iNFcEr46vDB+XySgwMhq5BmvhA6jjRISZyqEPwf0pnoa564hWkzugX4XUggld4jGPA6QHg+i5Mf7wDyynusSgjVaamH7Jv3jQH6snDMpKFI4YOIkPUmrLv5Ov4nwz1RG9IBod8W9P3d23+v97A/wB3YkNRdM3rOgAAAABJRU5ErkJggg==">'
              orden += '<p class="card_numer">'+t+'</p>'
              orden += '<div class="card__space-75">'
              orden += '<span class="card__label">Card holder</span>'
              orden += '<p class="card__info">'+n+'</p>'
              orden += '</div>'
              orden += '<div class="card__space-25">'
              orden += '<span class="card__label">Expires</span>'
              orden += '<p class="card__info">'+m+'/'+a+'</p>'
              orden += '</div>'
              orden += '</div>'
              orden += '<div class="card__back card__part">'
              orden += '<div class="card__black-line"></div>'
              orden += '<div class="card__back-content">'
              orden += '<div class="card__secret">'
              orden += '<p class="card__secret--last">'+c+'</p>'
              orden += '</div>'
              //orden += '<img class="card__back-square card__square" src="https://image.ibb.co/cZeFjx/little_square.png">'
              orden += '<img class="card__back-logo card__logo" src="data:image/png;base64,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TUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1LTAxLTEyVDE5OjAxOjgxPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5QaXhlbG1hdG9yIDMuMi4xPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjE8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEyMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NDA8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNj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">'
              orden += '</div>'
              orden += '</div>'
              orden += '</div>'*/
          $("#pedido").html(orden); 
      });

    /*
  
  <li class="list-group-item">A second item</li>
  <li class="list-group-item">A third item</li>
  <li class="list-group-item">A fourth item</li>
  <li class="list-group-item">And a fifth one</li>
</ul>*/

$(document).ready(function(){

    //$("#clientes").append($("#panel").val());
    /*var options = {
          types: ['(cities)'],
          componentRestrictions: {country: "mx"}
      }

      var input1 = document.getElementById("field_name2");
      var autocomplete1 = new google.maps.places.Autocomplete(input1, options);*/
      const image_input = document.querySelector("#receipt");
      image_input.addEventListener("change", function() {
        const reader = new FileReader();
        reader.addEventListener("load", () => {

          console.log(reader);
          /*var ImageURL = reader.result;
                // Split the base64 string in data and contentType
                var block = ImageURL.split(";");
                // Get the content type
                var contentType = block[0].split(":")[1];// In this case "image/gif"
                // get the real base64 content of the file
                var realData = block[1].split(",")[1];// In this case "iVBORw0KGg...."

          contentType = contentType || '';
            var sliceSize = sliceSize || 512;

            var byteCharacters = atob(realData);
            var byteArrays = [];

            for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
                var slice = byteCharacters.slice(offset, offset + sliceSize);

                var byteNumbers = new Array(slice.length);
                for (var i = 0; i < slice.length; i++) {
                    byteNumbers[i] = slice.charCodeAt(i);
                }

                var byteArray = new Uint8Array(byteNumbers);

                byteArrays.push(byteArray);
            }

          var blob = new Blob(byteArrays, {type: contentType});

          $.ajax({
                    url:"/guardaImg/"+blob,
                    data: blob,// the formData function is available in almost all new browsers.
                    type:"POST",
                    contentType:"application/octet-stream",
                    processData:false,
                    //cache:false,
                    //dataType:"json", // Change this according to your response from the server.
                    error:function(err){
                        console.error(err);
                    },
                    success:function(data){
                        console.log(data);
                    },
                    complete:function(){
                        console.log("Request finished.");
                    }
                });*/
          //const uploaded_image = "/imgs/Andres.png";
          //document.querySelector("#imagenp").style.backgroundImage = 'url('+uploaded_image+')';
          //var MyIFrame = document.getElementById("myframe");
          //var MyIFrameDoc = (MyIFrame.contentWindow || MyIFrame.contentDocument);
          //if (MyIFrameDoc.document) MyIFrameDoc = MyIFrameDoc.document;
          $("#ticket").click();
          //$("#form").submit(function (e) { return false; });

          //MyIFrameDoc.getElementById("myform").submit();
          //$("#form").submit(function () {
                //console.log(this);
                //e.preventDefault();
                //return false;
                /*$.ajax({
                  url: '/guardaImg',
                  type: 'post',
                  data:$('#imagen'),
                  success:function(data){
                      // Whatever you want to do after the form is successfully submitted
                      const uploaded_image = "/home/vsmx/app/public/imgs/"+data;
                      document.querySelector("#imagenp").style.backgroundImage = 'url('+uploaded_image+')';
                  }
              });*/
           //});
        });
        reader.readAsDataURL(this.files[0]);
        console.log(this.files[0]);
        //const uploaded_image = "/home/vsmx/app/public/imgs/"+this.files[0].name;
        //document.querySelector("#imagenp").style.backgroundImage = 'url('+uploaded_image+')';
        
      });
    
  });

    </script>